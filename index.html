<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>My Life On Air</title>
  
  <!-- 구글 폰트: Noto Serif KR -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR&display=swap" rel="stylesheet">

  <!-- Swiper.js CSS -->
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  
  <!-- 사용자 스타일시트 -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- HTML 부분 - 이것을 <body> 태그 바로 아래에 추가하세요 -->
    <div class="sidebar-navigation">
      <ul class="nav-list">
        <li class="nav-item" data-section="header">
          <a href="#" class="nav-link">
            <span class="nav-dot"></span>
            <span class="nav-text">메인</span>
          </a>
        </li>
        <li class="nav-item" data-section="birth-chart">
          <a href="#birth-chart" class="nav-link">
            <span class="nav-dot"></span>
            <span class="nav-text">팔자</span>
          </a>
        </li>
        <li class="nav-item" data-section="daewoon">
          <a href="#daewoon" class="nav-link">
            <span class="nav-dot"></span>
            <span class="nav-text">대운</span>
          </a>
        </li>
        <li class="nav-item" data-section="sewoon">
          <a href="#sewoon" class="nav-link">
            <span class="nav-dot"></span>
            <span class="nav-text">세운</span>
          </a>
        </li>
        <li class="nav-item" data-section="detailed-analysis">
          <a href="#detailed-analysis" class="nav-link">
            <span class="nav-dot"></span>
            <span class="nav-text">상세</span>
          </a>
        </li>
        <li class="nav-item" data-section="fortune-cards-container">
          <a href="#detailed-analysis" class="nav-link">
            <span class="nav-dot"></span>
            <span class="nav-text">카드요약</span>
          </a>
        </li>
        <li class="nav-item" data-section="final-narrative">
          <a href=".final-narrative" class="nav-link">
            <span class="nav-dot"></span>
            <span class="nav-text">마지막</span>
          </a>
        </li>
      </ul>
      <div class="nav-line"></div>
    </div>
  
  <!-- 페이지 헤더 -->
  <header>
    <div class="background-illustration" id="bg-illustration"></div>
    
    <p class="spoiler-warning">
      ⚠️ 이 페이지에는 당신 인생의 스포일러가 포함되어 있습니다.<br>
      <span class="spoiler-sub">팔자, 대운, 세운까지... 드라마를 보기도 전에 먼저 각본을 읽을 준비 되셨나요?</span>
    </p>
    
    <h1>My Life On Air</h1>
    <p>
      당신의 인생이 한 편의 드라마라면 명리학을 통해 알 수 있는 팔자는 ‘캐릭터 소개’, 10년 마다 바뀌는 대운은 ‘시즌’ 그리고 매해 바뀌는 세운은 시즌안에 벌어지는 ‘에피소드’라고 할 수 있어요.<br>
      당신을 위해 만들어진 이 웹페이지를 통해 주인공인 당신의 소개, 현재 놓여있는 대운 그리고 올해의 운세까지 일러스트를 통한 이야기로 들려드릴 거예요.<br>
      준비 되셨다면 아래 버튼을 눌러 시작해주세요!
    </p>
    <a href="#birth-chart" class="scroll-btn">이호상, 남, 1995/03/06 08:45</a>
  </header>

  <!-- 주인공 소개 섹션 -->
  <section id="birth-chart">
    <h2>주인공 소개</h2>
    <p>나는 어떤 기운을 타고났을까?</p>
    <a href="#birth-chart-detail" class="detail-btn">자세히 보기</a>
  </section>

  <!-- 주인공 상세 분석 섹션 (예시) -->
  <section id="birth-chart-detail" class="detail-section">
    <h3>🔥🐵황금 원숭이</h3>
    <p class="highlight-text">병신일주(火猴)의 기운을 타고난 그는, 가만히 있어도 존재감이 철철 넘치는 타입.</p>
    <p>한가운데, 햇빛을 받아 반짝반짝 빛나는 황금빛 원숭이는 누구일까요? 
    네, 맞아요. 저기 당당하게 앉아 있는건, 바로 호상님입니다!</p>
    
    <p>재치 있고, 머리 회전 빠르고, 거기다 민첩하기까지!
    위기 앞에서도 "어떻게든 되겠지~" 하고 싱긋 웃을 줄 아는, 그야말로 영민한 생존 마스터죠.</p>
    
    <p>주위를 감싸고 있는 건 울창한 소나무 숲.
    <strong>무인월주(土虎)</strong>의 기운을 닮아 단단한 뿌리로 땅을 붙잡고 있어요.
    이건 마치 호상님의 내면 같죠. 흔들릴 것 같다가도 절대 무너지지 않는 멘탈과 끈기.
    "아, 이 사람 은근히 깊다?" 하는 순간이 분명 올 겁니다.</p>
    
    <p>그 아래에 맑게 흐르는 물 그리고 살포시 올라오는 안개.
    <strong>을해년주(木猪)</strong>가 그려낸 풍경인데요—보기엔 조용하지만 속엔 깊고 넓은 에너지가 숨어 있어요.
    호상님도 마찬가지죠. 겉으론 장난기 많아 보여도, 속엔 꽤 진지한 생각들이 가득하거든요.</p>
    
    <p>그 너머 멀리 보이는, 숲 너머 폭포와 연못.
    네, 바로 <strong>임진시주(水龙)</strong>의 상징입니다.
    끊임없이 흐르며 길을 만들고, 언젠간 잠든 용처럼 깨어날 그 힘!
    호상님이 앞으로 어떤 모습으로 변할지, 누구보다 기대되는 이유예요.</p>
    <ul>
      <li>#다재다능 #밝고 명랑 #넓은 활동 반경 #기획력 #예의 바름 #예술적 감각 #깔끔한 일처리</li>
    </ul>
  </section>

  <!-- 대운 섹션 예시 -->
  <section id="daewoon">
    <h2>시작된 Season 3</h2>
    <p>10년 만에 바뀐 무대 위, 호상의 운명은?</p>
    <a href="#daewoon-detail" class="detail-btn">자세히 보기</a>
  </section>

  <section id="daewoon-detail" class="detail-section">
    <h3>🌊🐒혼돈과 기회의 물결</h3>
    <p class="highlight-text">풍랑이 치기 전의 바다가 가장 고요하듯이...</p>
  
      <p>“야, 네가 방향을 잘못 잡은 거라고!”
      “아니, 너야말로 매번 앞만 보고 달려들잖아!”
      
      한쪽은 <strong>인목(寅)</strong>, 늘 열정 넘치고 불끈불끈한 나무 기운.
      다른 쪽은 <strong>신금(申)</strong>, 차갑고 단단하지만 계산 빠른 금속 기운.</p>
      
      <p>사실 이 둘은 호상님의 마음속 가장 큰 두 친구였죠.
      이 둘은 늘 부딪치고, 충돌하고, 끊임없이 토론하며
      호상님을 <strong>앞으로 나아가게 만드는 원동력</strong>이 되어주었어요.</p>
      
      <p>그런데…
      언젠가부터 그 두 친구의 말다툼이
      조금씩 <strong>시끄럽게</strong>,
      그리고 <strong>무겁게</strong> 느껴지기 시작했어요.
      
      "뭐가 맞는지 모르겠어."
      "계속 싸우기만 하고… 나, 그냥 좀 조용했으면 좋겠어."</p>
      
      <p>그러던 어느날, 어디선가 가만히 귀를 기울이면 들리는 <strong>조용한</strong> 물소리에 이끌린 호상.
      숲 너머에서 <strong>해수(亥)</strong>가 등장한 거죠. 
      </p>
      
      <p>그 순간 호상의 마음속 두 친구가 동시에 물어오기 시작했어요.
      인목이 조심스레 내뱉었어요.
      “그럼, 이건… 좋은 변화야?”
      신금도 나직이 속삭였죠.
      “아니면 또 다른 싸움인가요?”
      
      그 물음에 강물은 아무런 대답이 없었습니다.
      그저 바위 아래로 조용히 흐르는 물줄기만이
      숲속의 공기를 바꿔놓고 있었어요.</p>
      
      <p>그리고 그날 밤,
      호상님은 오랜만에 <strong>잠깐 말을 멈추고,</strong>
      그 물소리를 조용히 들었습니다. 영원한 평온이 지속될 것만 같은 그 순간, <strong>깊은 바닥 어딘가서에서 일렁이는 파도</strong>의 소리를 듣게 된 호상은 조용히 눈을 떴습니다. 
      10년동안 함께하게 될 새로운 무대를 마주한 호상의 좁혀진 미간과 눈동자엔 올라간 입꼬리와는 다른 알 수 없는 망설임이 일렁이고 있었습니다.</p>
    <ul>
      <li>#적응 #흐름 #직관 #잠재된 변화</li>
    </ul>
  </section>

  <!-- 세운 섹션 예시 -->
  <section id="sewoon">
    <h2>S3 E1: 2025, 을사년도</h2>
    <p>올해의 연운이 나에게 어떤 도전을 줄까?</p>
    <a href="#sewoon-detail" class="detail-btn">자세히 보기</a>
  </section>

  <section id="sewoon-detail" class="detail-section">
    <h3>🎯🎲사선(四線)의 중앙에서</h3>
    <p class="highlight-text">인신사해, 새로운 10년 앞에 선 호상님이 앞으로 펼쳐나갈 이야기</p>
  
    <p>거센 물살 위, 호상님은 지금 막 <strong>도약을 시작한 참</strong>이었습니다. 몸은 공중에 떠 있었고, 붉은 스카프는 바람에 휘날리며, 아직 끝나지 않은 이야기의 시작을 알려주고 있었죠.</p>

    <p>아래는 을해 대운이 몰고 온 <span class="highlight">폭넓은 강물</span>, 지나온 모든 선택들이 흘러든 감정과 운명의 흐름이 지금 이 순간을 밀어 올리고 있었습니다. 그리고 저 멀리, 붉게 타오르는 을사의 불길이 조용히 하늘을 물들이고 있었죠.</p>

    <p>그 사이에 서 있는 호상님—지금은 도약의 한가운데, <strong>10년이라는 시간의 초입</strong>에 발을 디딘 셈입니다. 형과 충과 합이 뒤엉킨 사형의 기운 속에서 어쩌면 뭔가 분명히 뒤흔들릴 수 있는 시기일지도 몰라요.</p>

    <p>한쪽에선 오래 묻어뒀던 감정이 올라오고, 다른 쪽에선 새로운 방향성이 열릴 준비를 하고 있죠. 그래서인지, 호상님의 눈빛엔 설렘과 경계가 함께 비치고 있었습니다.</p>

    <p><strong>“어느 쪽으로든, 움직이긴 할 거야.”</strong></p>

    <p>그건 위협이 아니라, 이 여정이 가만히 머물 수 없다는 진실이었고, 그 안에는 분명히 더 넓은 가능성의 여지도 함께 있었습니다. 붉은 하늘과 잿빛 물결 사이, 긴장과 평온이 교차하는 공중에서 호상님은 여전히 날고 있습니다. 아직 착지하지 않았고, 어디로 향하게 될지도 모르죠.</p>

    <p>하지만 이건 분명해요. <strong>지금 이 도약은, 결코 헛되지 않을 거라는 것.</strong></p>
    <ul>
      <li>#열정 #갈등 #시험 #엄청난 도약 #급격한 변화</li>
    </ul>
  </section>

  <!-- 상세 분석 및 기타 콘텐츠 -->
  <section id="detailed-analysis">
    <h3>나의 팔자</h3>
    <div id="personal-info">
      <p><strong>이름:</strong> 이호상</p>
      <p><strong>생년월일:</strong> 1995/03/06 08:45</p>
    </div>

    <!-- 4기둥 표 예시 -->
    <div id="four-pillars">
      <table id="four-pillars-table">
       <thead>
          <tr>
            <th>시주</th>
            <th>일주</th>
            <th>월주</th>
            <th>연주</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>편관</strong></td>
            <td>본원</td>
            <td><strong>식신</strong></td>
            <td><strong>정인</strong></td>
          </tr>
          <tr>
            <td>壬<br>임</td>
            <td>丙<br>병</td>
            <td>戊<br>무</td>
            <td>乙<br>을</td>
          </tr>
          <tr>
            <td>辰<br>진</td>
            <td>申<br>신</td>
            <td>寅<br>인</td>
            <td>亥<br>해</td>
          </tr>
          <tr>
            <td>을 · 계 · 무</td>
            <td>무 · 임 · 경</td>
            <td>무 · 병 · 갑</td>
            <td>무 · 갑 · 임</td>
          </tr>
          <tr>
            <td><strong>식신</strong></td>
            <td><strong>편재</strong></td>
            <td><strong>편인</strong></td>
            <td><strong>편관</strong></td>
          </tr>
          <tr>
            <td>관대</td>
            <td>병</td>
            <td>장생</td>
            <td>절</td>
          </tr>
        </tbody>
      </table>
    </div>
    
<script>
  const elementMap = {
    // 한자
    '甲': 'wood', '乙': 'wood', '寅': 'wood', '卯': 'wood',
    '丙': 'fire', '丁': 'fire', '巳': 'fire', '午': 'fire',
    '戊': 'earth', '己': 'earth', '辰': 'earth', '戌': 'earth', '丑': 'earth', '未': 'earth',
    '庚': 'metal', '辛': 'metal', '申': 'metal', '酉': 'metal',
    '壬': 'water', '癸': 'water', '子': 'water', '亥': 'water',
    // 한글 독음
    '갑': 'wood', '을': 'wood', '인': 'wood', '묘': 'wood',
    '병': 'fire', '정': 'fire', '사': 'fire', '오': 'fire',
    '무': 'earth', '기': 'earth', '진': 'earth', '술': 'earth', '축': 'earth', '미': 'earth',
    '경': 'metal', '신': 'metal', '유': 'metal',
    '임': 'water', '계': 'water', '자': 'water', '해': 'water'
  };

  document.querySelectorAll('#four-pillars-table td').forEach(td => {
    // 먼저 한자 스타일 처리
    td.innerHTML = td.innerHTML.replace(
      /([甲乙丙丁戊己庚辛壬癸子丑寅卯辰巳午未申酉戌亥])/g,
      (match) => {
        const cls = elementMap[match];
        return cls
          ? `<span class="${cls}" style="padding: 2px 4px; border-radius: 4px;">${match}</span>`
          : match;
      }
    );

    // 한글 조합 처리 (· 있는 경우)
    const text = td.innerText.trim();
    if (text.includes('·')) {
      td.innerHTML = text.split('·').map(part => {
        const char = part.trim();
        const cls = elementMap[char];
        return cls
          ? `<span class="${cls}-text" style="margin: 0 4px;">${char}</span>`
          : `<span style="margin: 0 4px;">${char}</span>`;
      }).join('<span style="margin: 0 4px;">·</span>');
    }
  });
</script>



    
    <!-- 왕관 차트 예시 -->
    <div id="crown-chart">
      <h3>나의 팔자 파라미터</h3>
      <div class="chart-container">
        <svg viewBox="0 0 1300 800" preserveAspectRatio="xMidYMid meet">
          <!-- 배경 이미지 -->
          <image x="0" y="120" width="1500" height="900" href="./images/Palja_Param_Portrait.png" />
          <!-- 베이스 원 및 왕관 패스 -->
          <circle id="base-circle" fill="none" stroke="white" stroke-width="0"></circle>
          <path id="black-crown-path" fill="none" stroke="white" stroke-width="1"></path>
          <path id="orange-crown-path" fill="rgba(255,255,0,0.6)" stroke="none"></path>
        </svg>
      </div>
    </div>
  </section>

     <div class="fortune-cards-container">
        <!-- 운세 요약 카드 섹션 -->
        <section class="fortune-summary">
           <h2 class="section-title">2025 기회의 순간</h2>
            <div class="swiper-container opportunities-swiper">
              <div class="swiper-wrapper">
                <!-- Slide 1 -->
                <div class="swiper-slide">
                  <div class="card opportunity-card">
                    <div class="card-header">
                      <span class="card-icon">🔥</span>
                      <h3>부활</h3>
                    </div>
                    <div class="card-content">
                      <p>새로운 10년의 시작, 호상님의 내면에 숨겨진 심오한 에너지가 깨어나고 있습니다.</p>
                    </div>
                  </div>
                </div>
                <!-- Slide 2 -->
                <div class="swiper-slide">
                  <div class="card opportunity-card">
                    <div class="card-header">
                      <span class="card-icon">💧</span>
                      <h3>정화</h3>
                    </div>
                    <div class="card-content">
                      <p>과거의 감정과 경험을 조용히 흘려보내며, 내면의 깊은 물결을 정화하는 시기입니다.</p>
                    </div>
                  </div>
                </div>
                <!-- Slide 3 -->
                <div class="swiper-slide">
                  <div class="card opportunity-card">
                    <div class="card-header">
                      <span class="card-icon">🌱</span>
                      <h3>선별</h3>
                    </div>
                    <div class="card-content">
                      <p>흔들리는 순간 속에서 진정으로 원하는 것들을 명확히 선별하고 집중할 기회가 다가옵니다.</p>
                    </div>
                  </div>
                </div>
                <!-- 추가 슬라이드는 기존 컨텐츠에 맞게 추가 -->
              </div>
              <!-- Pagination for opportunities -->
            <div class="swiper-pagination opportunities-pagination"></div>
            </div>

           <h2 class="section-title">2025 도전의 순간</h2>
            <div class="swiper-container challenges-swiper">
              <div class="swiper-wrapper">
                <!-- Slide 1 -->
                <div class="swiper-slide">
                  <div class="card challenge-card">
                    <div class="card-header">
                      <span class="card-icon">💥</span>
                      <h3>파열</h3>
                    </div>
                    <div class="card-content">
                      <p>내면의 갈등이 최고조에 달하며, 기존의 안정된 틀을 깨뜨릴 위험이 도사리고 있습니다.</p>
                    </div>
                  </div>
                </div>
                <!-- Slide 2 -->
                <div class="swiper-slide">
                  <div class="card challenge-card">
                    <div class="card-header">
                      <span class="card-icon">⚡️</span>
                      <h3>충돌</h3>
                    </div>
                    <div class="card-content">
                      <p>서로 다른 에너지와 욕구가 격렬하게 부딪치며 내적 긴장감을 고조시키고 있습니다.</p>
                    </div>
                  </div>
                </div>
                <!-- Slide 3 -->
                <div class="swiper-slide">
                  <div class="card challenge-card">
                    <div class="card-header">
                      <span class="card-icon">📉</span>
                      <h3>압박</h3>
                    </div>
                    <div class="card-content">
                      <p>외부의 압박과 내면의 불안정한 감정들이 동시에 나를 옭아매고 있는 상황입니다.</p>
                    </div>
                  </div>
                </div>
                <!-- 추가 슬라이드는 기존 컨텐츠에 맞게 추가 -->
              </div>
              <!-- Pagination for challenges -->
            <div class="swiper-pagination challenges-pagination"></div>
            </div>
            
            <!-- 개운법 & 피해야 할 것들 섹션 -->
        <h2 class="section-title">개운법 및 주의사항</h2>
         <div class="swiper-container guidance-swiper">
      <div class="swiper-wrapper">
        <!-- Slide 1 -->
        <div class="swiper-slide">
          <div class="card guidance-card">
            <div class="card-header">
              <span class="card-icon">🔥</span>
              <h3>함께해요</h3>
            </div>
            <div class="card-content split-content">
              <div class="guidance-column">
                <h4><span style="color: green;">목(木) 에너지</h4>
                <ul>
                  <li>📚 독서, 자기계발</li>
                  <li>🍀 식물과 함께</li>
                  <li>💚 초록/청색계열</li>
                  <li>🌅 동쪽</li>
                </ul>
              </div>
              <div class="guidance-column">
                <h4><span style="color: red;">화(火) 에너지</h4>
                <ul>
                  <li>🏃‍♂️ 유산소 운동</li>
                  <li>🕯 따뜻한 조명</li>
                  <li>❤️ 붉은색계열</li>
                  <li>☀️ 남쪽</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <!-- Slide 2 -->
        <div class="swiper-slide">
          <div class="card avoidance-card">
            <div class="card-header">
              <span class="card-icon">🚫</span>
              <h3>멀리해요</h3>
            </div>
            <div class="card-content">
              <ul>
                <li>💢 과도한 감정적 억제</li>
                <li>⚔️ 무의미한 갈등 지속</li>
                <li>😰 변화에 대한 두려움</li>
                <li>🧊 찬물, 아이스커피</li>
              </ul>
            </div>
          </div>
        </div>
        <!-- Slide 3 -->
        <div class="swiper-slide">
          <div class="card health-card">
                <div class="card-header">
                    <span class="card-icon">❤️</span>
                    <h3>주의 증상</h3>
                </div>
                <div class="card-content">
                    <ul>
                        <li>🩸 순환기 불균형</li>
                        <li>😰 스트레스 축적</li>
                    </ul>
                </div>
            </div>
        </div>
       <!-- Slide 4 -->
        <div class="swiper-slide">
          <div class="card health-card">
                <div class="card-header">
                    <span class="card-icon">🌈</span>
                    <h3>회복 습관</h3>
                </div>
                <div class="card-content">
                    <ul>
                        <li>🌞 매일 햇볕 쬐기</li>
                        <li>🏃 규칙적 운동</li>
                        <li>🧘 명상 실천</li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- Slide 5 -->
        <div class="swiper-slide">
          <div class="card health-card">
                <div class="card-header">
                    <span class="card-icon">🍎</span>
                    <h3>추천 음식</h3>
                </div>
                <div class="card-content">
                    <ul>
                        <li>🍵 생강차</li>
                        <li>🧄 마늘</li>
                        <li>🥬 녹색 채소</li>
                    </ul>
                </div>
            </div>
        </div>
      </div>
       <!-- Pagination for guidance -->
      <div class="swiper-pagination guidance-pagination"></div>
      </div>
     </div>
    </section>
       
        <!-- 마무리 내러티브 섹션 -->
        <section class="final-narrative">
            <div class="narrative-card">
                <div class="card-content">
                    <h2>HP 1 남기고 레벨업!</h2>
                    <p class="narrative-description"><strong>“What doesn’t kill you makes you stronger.”</strong></p>

<p class="narrative-description">올해는 말 그대로 '체력 1 남기고 클리어하는 판'들의 연속일 가능성이 높아요. 관계에서, 일에서, 감정에서… 어딘가 계속 얻어맞는 느낌이 들 수 있죠. 하지만 그만큼, 버텼다는 건 경험치를 쌓았다는 뜻이라는 거.</p>

<p class="narrative-description">중요한 건, 이 과정이 당신을 다음 레벨로 끌어올린다는 것이에요. 잠깐 주저앉아도 괜찮고, 눈물 한 번 흘려도 괜찮아요.</p>

<p class="narrative-description">포션 한 병 마시고, 스킬 다시 정비하고 계속 도전해보는거에요. 결국 당신은 이겨낼 거니까요!</p>
                    <div class="cta-buttons">
                        <button class="cta-btn">오늘의 한마디</button>
                        <button class="cta-secondary-btn">향후 10년 운세 요약</button>
                    </div>
                </div>
            </div>
        </section>
    </div>
  
  <!-- 외부 JS 라이브러리: GSAP와 ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Swiper.js JS -->
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  
  <!-- 사용자 작성 스크립트 -->
  <script src="script.js"></script>

  <!-- side navigation script -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // 모든 섹션 요소와 네비게이션 항목
        const sections = document.querySelectorAll('section, header, .fortune-cards-container');
        const navItems = document.querySelectorAll('.sidebar-navigation .nav-item');
        
        // 네비게이션 링크 클릭 이벤트 처리
        navItems.forEach(item => {
          item.querySelector('.nav-link').addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            
            // # 만 있는 경우 페이지 상단으로 스크롤
            if (targetId === '#') {
              window.scrollTo({
                top: 0,
                behavior: 'smooth'
              });
            } 
            // 클래스로 시작하는 경우 (.final-narrative 같은)
            else if (targetId.startsWith('.')) {
              const targetElement = document.querySelector(targetId);
              if (targetElement) {
                const offsetTop = targetElement.offsetTop;
                window.scrollTo({
                  top: offsetTop,
                  behavior: 'smooth'
                });
              }
            }
            // ID로 시작하는 경우 (일반적인 #id 형식)
            else {
              const targetElement = document.querySelector(targetId);
              if (targetElement) {
                const offsetTop = targetElement.offsetTop;
                window.scrollTo({
                  top: offsetTop,
                  behavior: 'smooth'
                });
              }
            }
          });
        });
        
        // 스크롤 이벤트 처리 - 현재 보이는 섹션에 따라 네비게이션 활성화
        window.addEventListener('scroll', function() {
          const scrollPosition = window.scrollY;
          
          // 각 섹션의 위치 확인
          sections.forEach(section => {
            const sectionTop = section.offsetTop - 100; // 약간의 오프셋
            const sectionHeight = section.offsetHeight;
            let sectionId = section.id;
              if (!sectionId) {
                if (section.tagName.toLowerCase() === 'header') {
                  sectionId = 'header';
                } else if (section.classList.contains('fortune-cards-container')) {
                  sectionId = 'fortune-cards-container';
                }
              }
            
            // 현재 스크롤 위치가 해당 섹션 내에 있는지 확인
            if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
              // 이전 활성 항목에서 active 클래스 제거
              navItems.forEach(item => {
                item.classList.remove('active');
              });
              
              // 현재 섹션에 해당하는 네비게이션 항목 찾기
              const correspondingNavItem = document.querySelector(`.nav-item[data-section="${sectionId}"]`);
              if (correspondingNavItem) {
                correspondingNavItem.classList.add('active');
              }
            }
          });
        });
        
        // 초기 로드 시 활성화될 섹션 설정
        function setInitialActiveSection() {
          const scrollPosition = window.scrollY;
          let activeSection = null;
          
          sections.forEach(section => {
            const sectionTop = section.offsetTop - 100;
            const sectionHeight = section.offsetHeight;
            const sectionId = section.id || (section.tagName.toLowerCase() === 'header' ? 'header' : '');
            
            if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
              activeSection = sectionId;
            }
          });
          
          if (activeSection) {
            navItems.forEach(item => {
              item.classList.remove('active');
            });
            
            const correspondingNavItem = document.querySelector(`.nav-item[data-section="${activeSection}"]`);
            if (correspondingNavItem) {
              correspondingNavItem.classList.add('active');
            }
          } else {
            // 기본적으로 첫 번째 항목을 활성화
            navItems[0].classList.add('active');
          }
        }
        
        // 페이지 로드 시 초기 활성 섹션 설정
        setInitialActiveSection();
        
        // 스크롤 이벤트도 발생시켜 현재 위치 확인
        window.dispatchEvent(new Event('scroll'));
      });
    </script>
</body>
</html>
